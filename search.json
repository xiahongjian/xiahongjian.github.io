[{"title":"Ideaå¸¸ç”¨å¿«æ·é”®","url":"/2019/05/29/Idea%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/","content":"æ’ä»¶æ¨èæ¨èå¤§å®¶å®‰è£…IDE Features Trainerè¿™æ¬¾æ’ä»¶ï¼Œæ’ä»¶é€šè¿‡ç¤ºä¾‹å¸®åŠ©æˆ‘ä»¬è®°å¿†å„ç§å¸¸ç”¨çš„å¿«æ·é”®ï¼Œä»¥ä¸‹æ”¶å½•çš„å¿«æ·é”®éƒ½æ˜¯æ’ä»¶ä¸­æåŠçš„ã€‚\n\nå¿«æ·é”®é€ŸæŸ¥âŒ¥â‡§â†’: to move caret to next word and select everything between in\nâŒ¥â†‘: to extend the selection to the next code block\nâŒ¥â†“: to shrink selection\nâŒƒ/: Basic Completion\nâ‡§F6: to rename\nâŒ˜âŒ¥L: to format code\nâŒ˜âŒƒG: é€‰æ‹©æ–‡ä»¶ä¸­çš„æ‰€æœ‰ç›¸åŒç¬¦å·\nF2: to jump the next highlight error\nâŒ˜F1: to see error description\nâŒ˜â‡§F7: to highlight all usages of the symbol at caret with the file\nâŒ˜P: to see the method signature\nâŒ˜â†“ï¼š to look up the source\nâŒ˜B: to jump the declaration of a class of interface\nâŒ˜F12: to see the file sturcture\nâŒ˜F: to call the Find action\nâ or âŒ˜G: to find next occurrences\nâŒ˜â‡§G: to find previous occurrences\n","tags":["Idea","å¿«æ·é”®"]},{"title":"Javaçº¿ç¨‹ä¹‹å‰æ•°æ®ä¼ é€’çš„æ–¹æ¡ˆ","url":"/2025/04/08/Java%E7%BA%BF%E7%A8%8B%E4%B9%8B%E9%97%B4%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92%E7%9A%84%E6%96%B9%E6%A1%88/","content":"å¼•è¨€åœ¨æ—¥å¸¸å¼€å‘ä¸­ç»å¸¸é‡åˆ°è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šåœ¨æ‹¦æˆªå™¨ä¸­å¯¹ç”¨æˆ·åšç»Ÿä¸€çš„é‰´æƒï¼Œé‰´æƒé€šè¿‡åå°†å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ThreadLocalä½¿ç”¨å­˜å‚¨åœ¨å½“å‰çº¿ç¨‹ä¸­ï¼Œæ–¹ä¾¿åç»­ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨ã€‚ä½†æœ‰æ—¶ï¼Œæ‰§è¡Œçš„ä¸šåŠ¡æ¯”è¾ƒè€—æ—¶ï¼Œæˆ‘ä»¬ä¼šå°†ä¸šåŠ¡æ‰§è¡Œé€»è¾‘å°è£…åˆ°ç”±@Asyncæ ‡æ³¨çš„å¼‚æ­¥æ–¹æ³•ä¸­æˆ–æäº¤åˆ°çº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼Œè¿™æ—¶åœ¨æ‰§è¡Œä¸šåŠ¡ä»£ç ä¼šæ— æ³•è·å–åˆ°ä¹‹å‰ç¼“å­˜çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå› ä¸ºçº¿ç¨‹å·²ç»å‘ç”Ÿäº†åˆ‡æ¢ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æ”¹æ€æ ·å°†ä»»åŠ¡æäº¤ä»»åŠ¡çº¿ç¨‹ç¼“å­˜çš„æ•°æ®ä¼ é€’ç»™æ‰§è¡Œçº¿ç¨‹å‘¢ï¼Ÿ\n\nThreadLcoalçš„åŸç†é¦–å…ˆï¼Œæˆ‘ä»¬ç®€å•çœ‹ä¸€ä¸‹ThreadLocalçš„åŸºæœ¬åŸç†ã€‚ä½¿ç”¨ThreadLocal#setæ–¹æ³•å­˜å‚¨çš„æ•°æ®ä¼šå­˜å‚¨åœ¨å½“å‰çº¿ç¨‹çš„threadLcoalsæˆå‘˜å˜é‡ä¸­ï¼ŒthreadLocalsçš„ç±»å‹æ˜¯ThreadLocal.ThreadLocalMapï¼Œå¯ä»¥ç®€å•çš„ç†è§£æˆä¸€ä¸ªMapã€‚å½“è°ƒç”¨ThreadLocal#getæ—¶ï¼Œä¼šä»å½“å‰çº¿ç¨‹çš„threadLocalsæˆå‘˜å˜é‡ä¸­å–å‡ºå­˜å‚¨çš„å€¼ã€‚\nä½¿ç”¨InheritableThreadLocalä¼ é€’æ•°æ®InheritableThreadLocalå¯ä»¥å°†æ•°æ®ç”±çˆ¶çº¿ç¨‹ä¼ é€’ç»™å­çº¿ç¨‹ã€‚ä¸ThreadLcoalç±»ä¼¼ï¼ŒInheritableThreadLocalä¹Ÿæ˜¯å°†æ•°æ®å­˜å‚¨åœ¨å½“å‰çº¿ç¨‹çš„ä¸€ä¸ªæˆå‘˜å˜é‡é‡Œï¼ˆinheritableThradLocalsï¼‰ã€‚\n/* ThreadLocal values pertaining to this thread. This map is maintained * by the ThreadLocal class. */ThreadLocal.ThreadLocalMap threadLocals = null;/* * InheritableThreadLocal values pertaining to this thread. This map is * maintained by the InheritableThreadLocal class. */ThreadLocal.ThreadLocalMap inheritableThreadLocals = null;\né‚£ä¹ˆçˆ¶çº¿ç¨‹æ˜¯æ€ä¹ˆå°†æ•°æ®ä¼ é€’ç»™å­çº¿ç¨‹çš„å‘¢ï¼ŸæŸ¥çœ‹Threadç±»çš„æ„é€ æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°åˆå§‹åŒ–inheritableThreadLocalsæ—¶ä½¿ç”¨äº†ThreadLcoal.createInheriableMapï¼Œå¹¶ä¼ é€’äº†çˆ¶çº¿ç¨‹çš„inheriableThreadLocalä½œä¸ºå‚æ•°ã€‚\nThread(String name, int characteristics, boolean bound) &#123;    // ...    // çœç•¥æ— å…³ä»£ç     // thread locals    if ((characteristics &amp; NO_INHERIT_THREAD_LOCALS) == 0) &#123;        Thread parent = currentThread();        ThreadLocal.ThreadLocalMap parentMap = parent.inheritableThreadLocals;        // åœ¨è¿™é‡Œåšäº†åˆå§‹åŒ–        if (parentMap != null &amp;&amp; parentMap.size() &gt; 0) &#123;            this.inheritableThreadLocals = ThreadLocal.createInheritedMap(parentMap);        &#125;        this.contextClassLoader = contextClassLoader(parent);    &#125; else &#123;        // default CCL to the system class loader when not inheriting        this.contextClassLoader = ClassLoader.getSystemClassLoader();    &#125;        // çœç•¥æ— å…³ä»£ç     // ...&#125;\nè¿è¡Œä»¥ä¸‹ä»£ç ï¼š\npublic class Test &#123;    public static void main(String[] args) &#123;        InheritableThreadLocal&lt;String&gt; currentUserHolder = new InheritableThreadLocal&lt;&gt;();        currentUserHolder.set(&quot;tom&quot;);        System.out.printf(&quot;Thread: %s, current user: %s%n&quot;, Thread.currentThread().getName(), currentUserHolder.get());        Thread child = new Thread(() -&gt; &#123;            System.out.printf(&quot;Thread: %s, current user: %s%n&quot;, Thread.currentThread().getName(), currentUserHolder.get());        &#125;);        child.start();    &#125;&#125;\nå¾—åˆ°ç»“æœï¼š\nThread: main, current user: tomThread: Thread-0, current user: tom\næ•°æ®æˆåŠŸåœ°ä»çˆ¶çº¿ç¨‹ä¼ é€’åˆ°äº†å­çº¿ç¨‹ã€‚ä½†æ˜¯inheriableThreadLocalsçš„åˆå§‹åŒ–åœ¨çº¿ç¨‹åˆ›å»ºçš„æ—¶å€™ï¼Œçº¿ç¨‹åˆ›å»ºåï¼Œå¯¹InheritableThreadLocalå®ä¾‹åç»­çš„æ“ä½œå­çº¿ç¨‹å°†æ— æ³•æ„ŸçŸ¥ã€‚æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š\npublic class Test &#123;    public static void main(String[] args) &#123;        InheritableThreadLocal&lt;String&gt; currentUserHolder = new InheritableThreadLocal&lt;&gt;();        currentUserHolder.set(&quot;tom&quot;);        System.out.printf(&quot;Thread: %s, current user: %s%n&quot;, Thread.currentThread().getName(), currentUserHolder.get());        Thread child = new Thread(() -&gt; &#123;            System.out.printf(&quot;Thread: %s, current user: %s%n&quot;, Thread.currentThread().getName(), currentUserHolder.get());        &#125;);        // è°ƒæ•´InheritableThreadLocalä¸­å­˜å‚¨çš„å€¼        currentUserHolder.set(&quot;jerry&quot;);        System.out.printf(&quot;Thread: %s, current user: %s%n&quot;, Thread.currentThread().getName(), currentUserHolder.get());        child.start();    &#125;&#125;\nä¼šå¾—åˆ°ä»¥ä¸‹ç»“æœï¼š\nThread: main, current user: tomThread: main, current user: jerryThread: Thread-0, current user: tom\nå› æ­¤InheritableThreadLocalå¹¶ä¸èƒ½èƒœä»»ä¸€èˆ¬çš„ä¸šåŠ¡åœºæ™¯ï¼Œå› ä¸ºä¸€èˆ¬éƒ½ä¸ä¼šæ‰‹åŠ¨æ–°å»ºçº¿ç¨‹ï¼Œè€Œæ˜¯ä½¿ç”¨çº¿ç¨‹æ± ã€‚\næ‰‹åŠ¨ä¼ é€’ThreadLocalä¸­çš„å€¼æ—¢ç„¶InheriableThreadLocalè‡ªåŠ¨ä¼ é€’æ•°æ®æœ‰å±€é™æ€§ï¼Œé‚£ä¹ˆæ˜¯å¦å¯ä»¥æ‰‹åŠ¨ä¼ é€’å‘¢ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯ï¼šå¯ä»¥ï¼\nçº¿ç¨‹æ± çš„ä½¿ç”¨public class TaskWrapperTest &#123;    public static class UserCtxHolder &#123;        private static final ThreadLocal&lt;String&gt; threadLocal = new ThreadLocal&lt;&gt;();        public static String get() &#123;            return threadLocal.get();        &#125;        public static void set(String val) &#123;            threadLocal.set(val);        &#125;        public static void clean() &#123;            threadLocal.remove();        &#125;    &#125;    public static class UserCtxAwareRunnable implements Runnable &#123;        private final String currentUser;        private final Runnable task;        public UserCtxAwareRunnable(Runnable task) &#123;            this.currentUser = UserCtxHolder.get();            this.task = task;        &#125;        @Override        public void run() &#123;            try &#123;                UserCtxHolder.set(currentUser);                task.run();            &#125; finally &#123;                UserCtxHolder.clean();            &#125;        &#125;    &#125;    public static void main(String[] args) &#123;        UserCtxHolder.set(&quot;tom&quot;);        System.out.println(&quot;Thread: %s, current user: %s&quot;.formatted(Thread.currentThread().getName(), UserCtxHolder.get()));        try (ExecutorService executor = Executors.newSingleThreadExecutor()) &#123;            executor.execute(new UserCtxAwareRunnable(() -&gt; System.out.println(&quot;Thread: %s, current user: %s&quot;.formatted(Thread.currentThread().getName(), UserCtxHolder.get()))));        &#125;    &#125;&#125;\nè¿è¡Œç»“æœï¼š\nThread: main, current user: tomThread: pool-1-thread-1, current user: tom\næ¯æ¬¡æ‰§è¡Œä»»åŠ¡çš„æ—¶å€™éƒ½éœ€è¦ä¼ é€’è‡ªå®šä¹‰çš„Runnalbeçš„åŒ…è£…ç±»UserCtxAwareRunnalbeçš„å®ä¾‹ï¼Œè¿™æ ·ä¸å¯é¿å…å­˜åœ¨æ— ç”¨ï¼Œæœªä½¿ç”¨åŒ…è£…ç±»ï¼Œç›´æ¥ä¼ å…¥Runnableå®ä¾‹ï¼Œå¯¼è‡´æ•°æ®æœªä¼ é€’ã€‚ä¸ºé¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œä¼ å…¥Runnableå®ä¾‹æ—¶ï¼Œè‡ªåŠ¨ä½¿ç”¨UserCtxAwareRunnableåŒ…è£…ã€‚\npublic class CommonBizThreadPool implements Executor &#123;    public static final CommonBizThreadPool INSTANCE = new CommonBizThreadPool();    private final Executor executor;    private CommonBizThreadPool() &#123;        // ç¤ºä¾‹ä»£ç ï¼Œå‹¿ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œå®é™…æŒ‰éœ€åˆ›å»ºçº¿ç¨‹æ±         executor = Executors.newSingleThreadExecutor();    &#125;    @Override    public void execute(Runnable command) &#123;        // åœ¨è¿™é‡ŒåŒ…è£…Runnableå®ä¾‹        executor.execute(new UserCtxAwareRunnable(command));    &#125;&#125;\nSpringå¼‚æ­¥ä»»åŠ¡æ¥ä¸‹æ¥è¦å¤„ç†å¦ä¸€ä¸ªé—®é¢˜ï¼Œå¯¹äº@Asyncæ³¨è§£æ ‡è®°çš„å¼‚æ­¥æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•é»˜è®¤ä½¿ç”¨springå®šä¹‰çš„ThreadPoolTaskExecutorçº¿ç¨‹æ± æ‰§è¡Œï¼Œæˆ‘ä»¬ä¹Ÿè¦å¯¹è¿™ä¸ªçº¿ç¨‹æ± æ‰§è¡Œçš„ä»»åŠ¡è¿›è¡Œä¸Šæ–‡ç±»ä¼¼è£…é¥°ï¼ˆæ‰‹åŠ¨è®¾ç½®ThreadLocalï¼‰ã€‚ThreadPoolTaskExecutoræä¾›äº†setTaskDecoratoræ–¹æ³•ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥â€œè£…é¥°â€ä¸€ä¸ªä»»åŠ¡ã€‚å®šä¹‰ä¸€ä¸ªä»»åŠ¡è£…é¥°å™¨\npublic class UserCtxAwareTaskDecorator implements TaskDecorator &#123;    @Override    public Runnable decorate() &#123;        String currentUser = UserCtxHolder.get();        return () -&gt; &#123;            try &#123;                UserCtxHolder.set(currentUser);                runnable.run();            &#125; finally &#123;                UserCtxHolder.clean();            &#125;        &#125;;    &#125;&#125;\nå®šä¹‰ThreadPoolTaskExecutorbean\n@Configurationpublic class BeanConfiguration &#123;    @Bean    public ThreadPoolTaskExecutor threadPoolTaskExecutor() &#123;        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();        // çº¿ç¨‹æ± å‚æ•°æ ¹æ®å®é™…éœ€æ±‚ä¿®æ”¹        executor.setCorePoolSize(5);        executor.setMaxPoolSize(10);        executor.setQueueCapacity(100);        executor.setThreadNamePrefix(&quot;custom-&quot;);        // è®¾ç½®ä»»åŠ¡è£…é¥°å™¨        executor.setTaskDecorator(new UserCtxAwareTaskDecorator());        executor.initialize();        return executor;    &#125;&#125;\nå»¶ç”³å¦‚æœä½¿ç”¨åˆ°äº†å¤šä¸ªThreadLocalï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨çº¿ç¨‹æ± ä»»åŠ¡åŒ…è£…ç±»UserCtxAwareRunnableå’ŒUserCtxAwareTaskDecoratorä¸­å¤„ç†è¿™äº›ThreadLocalï¼Œè¿™æ ·å°±æœ‰äº›ç¹çäº†ã€‚å…¶å®æˆ‘ä»¬å¯ä»¥å€ŸåŠ©é˜¿é‡Œçš„transmittable-thread-localï¼Œè½»æ¾çš„å®ç°æ•°æ®åœ¨çˆ¶å­çº¿ç¨‹ä¸­ä¼ é€’ã€‚\n\nå¼•å…¥ä¾èµ–\n &lt;dependency&gt;&lt;groupId&gt;com.alibaba&lt;/groupId&gt;&lt;artifactId&gt;transmittable-thread-local&lt;/artifactId&gt;&lt;version&gt;2.14.5&lt;/version&gt;&lt;/dependency&gt;\n\næ›¿æ¢åŸæ¥ä½¿ç”¨çš„ThreadLocalä¸ºTransmittableThreadLocal\n public class UserCtxHolder &#123;    private static final TransmitableThreadLocal&lt;String&gt; threadLocal = new TTransmitableThreadLocal&lt;&gt;();    public static String get() &#123;        return threadLocal.get();    &#125;    public static void set(String val) &#123;        threadLocal.set(val);    &#125;    public static void clean() &#123;        threadLocal.remove();    &#125;&#125;\n\nä½¿ç”¨TtlExecutors.getTtlExecutorè£…é¥°åŸçº¿ç¨‹æ± \n public class CommonBizThreadPool2 &#123;    // ä½¿ç”¨TtlExecutors.getTtlExecutorè£…é¥°åŸçº¿ç¨‹æ±     public static final Executor INSTANCE = TtlExecutors.getTtlExecutor(Executors.newSingleThreadExecutor());    public static Executor getInstance() &#123;        return INSTANCE;    &#125;&#125;\n\nåˆ›å»ºä¸€ä¸ªå®ç°äº†AsyncConfigurateræ¥å£çš„beanï¼ˆå¤„ç†@Asyncå¼‚æ­¥è°ƒç”¨æ—¶çš„æ•°æ®ä¼ é€’ï¼‰\n @Componentpublic class CustomAsyncConfig implements AsyncConfigurer &#123;    @Override    public Executor getAsyncExecutor() &#123;        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();        // çº¿ç¨‹æ± å‚æ•°æ ¹æ®å®é™…æƒ…å†µè®¾ç½®        executor.setCorePoolSize(5);        executor.setMaxPoolSize(10);        executor.setQueueCapacity(100);        executor.setThreadNamePrefix(&quot;CustomAsyncConfig-&quot;);        executor.initialize();        // åŒ…è£…çº¿ç¨‹æ±         return TtlExecutors.getTtlExecutor(executor);    &#125;&#125;\n\n\n","categories":["Java"],"tags":["Java","Spring"]},{"title":"Let's Encrypt HTTPSè¯ä¹¦ç”³è¯·ã€å®‰è£…åŠè‡ªåŠ¨ç»­æœŸ","url":"/2019/03/28/Let-s-Encrypt-HTTPS%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7%E3%80%81%E5%AE%89%E8%A3%85%E5%8F%8A%E8%87%AA%E5%8A%A8%E7%BB%AD%E6%9C%9F/","content":"æ¦‚è¿°ç”±äºæ–°ç‰ˆæœ¬çš„Chromeå¯¹äºéHTTPSç½‘ç«™éƒ½ä¼šæç¤ºä¸å®‰å…¨ï¼Œååˆ†å½±å“ä½¿ç”¨ä½“éªŒï¼Œæ‰€ä»¥æ‰“ç®—æŠŠåšå®¢ç«™ç‚¹å‡çº§åˆ°HTTPSã€‚\nè¿è¡Œç¯å¢ƒæ­¤åšå®¢ç³»ç»Ÿçš„è¿è¡Œç¯å¢ƒæ˜¯é˜¿é‡Œäº‘Ubuntu14.04(ä¸è®°å¾—å½“åˆä¹°ECSçš„æ—¶å€™ä¸ºä»€ä¹ˆä¼šé€‰è¿™ä¸ªç‰ˆæœ¬ï¼Œå¯èƒ½æ˜¯å¿˜è®°é€‰äº†å§ğŸ˜‚)ï¼ŒNginx, Spring Bootã€‚\n\nNginx httpsæ¨¡å—æ”¯æŒå½“åˆå®‰è£…Nginxæ—¶æ²¡æœ‰é…ç½®æ”¯æŒhttpsï¼Œæ‰€ä»¥éœ€è¦é‡æ–°ç¼–è¯‘ä¸€ä¸ªæ”¯æŒhttppsçš„Nginxã€‚\né¦–å…ˆç¡®å®šè‡ªå·±çš„Nginxçš„ç‰ˆæœ¬åŠç¼–è¯‘å‚æ•°ï¼ˆå¦‚æœæ”¯æŒhttpså³å¯è·³è¿‡æ¥ä¸‹æ¥çš„æ­¥éª¤ï¼‰ã€‚æ‰§è¡Œnginx -Vï¼Œç¡®å®šNginxç‰ˆæœ¬ã€‚\nä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„Nginxæºç ,è§£å‹åè¿›å…¥ç›®å½•, æ‰§è¡Œä»¥ä¸‹å‘½ä»¤\n./configure --prefix=/usr/local/nginx --with-http_ssl_module --with-file-aio --with-http_realip_modulemake\næ³¨æ„ --prefixéœ€è¦è¾“å…¥è‡ªå·±çš„Nginxå®‰è£…ç›®å½•ï¼Œå¦åˆ™è¿è¡ŒNginxæ—¶ä¼šå‡ºç°æ— æ³•æ‰“å¼€logæ–‡ä»¶ã€é…ç½®æ–‡ä»¶ç­‰é—®é¢˜ã€‚ç¼–è¯‘å®Œæ¯•åobjsç›®å½•ä¸‹å°±æœ‰ä¸ªnginxæ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ã€‚\nå¤‡ä»½åŸæ¥çš„Nginxç¨‹åºã€‚\ncp /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.bak\nkill Nginxè¿›ç¨‹ï¼Œç„¶åå¤åˆ¶æ–°ç¼–è¯‘çš„Nginxã€‚\ncp ./objs/nginx /usr/local/nginx/sbin/nginx\nå¯åŠ¨Nginxï¼Œå®Œå·¥ã€‚\nå®‰è£…Certbot-autoåŠè¯ä¹¦ç”Ÿæˆä¸‹è½½Certbot-auto, chmod +x certbot-autoæ·»åŠ è¿è¡Œæ‰§è¡Œæƒé™ã€‚\nè¿™é‡Œæˆ‘éœ€è¦ç”³è¯·çš„æ˜¯é€šé…ç¬¦è¯ä¹¦ï¼Œæ‰€ä»¥ç”³è¯·è¿‡ç¨‹ä¸­éœ€è¦ä¸ºDNSå¢åŠ ä¸€æ¡TXTè®°å½•ï¼Œä¸ºäº†æ–¹ä¾¿ä»¥åè‡ªåŠ¨ç»­æœŸ(renew)ï¼Œéœ€è¦ç”¨åˆ°å¦å¤–ä¸€ä¸ªé¡¹ç›®certbot-letencrypt-wildcardcertificates-alydns-auï¼Œè¿™ä¸ªé¡¹ç›®åŠŸèƒ½è‡ªåŠ¨è°ƒç”¨APIä¸ºDNSæ·»åŠ TXTè®°å½•ã€‚\nä¸‹è½½certbot-letencrypt-wildcardcertificates-alydns-auåéœ€è¦åœ¨è„šæœ¬ä¸­é…ç½®ä¸Šè‡ªå·±çš„API Keyã€‚æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æµ‹è¯•(å…·ä½“è„šæœ¬çš„å‚æ•°ï¼Œå‚è€ƒé¡¹ç›®çš„README)\n./certbot-auto certonly  -d *.example.com --manual --preferred-challenges dns --dry-run  --manual-auth-hook &quot;/è„šæœ¬ç›®å½•/au.sh php aly add&quot; --manual-cleanup-hook &quot;/è„šæœ¬ç›®å½•/au.sh php aly clean&quot; \næ²¡æœ‰é—®é¢˜åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ­£å¼ç”Ÿæˆè¯ä¹¦\n./certbot-auto certonly  -d *.example.com --manual --preferred-challenges dns --dry-run  --manual-auth-hook &quot;/è„šæœ¬ç›®å½•/au.sh php aly add&quot; --manual-cleanup-hook &quot;/è„šæœ¬ç›®å½•/au.sh php aly clean&quot; \næŸ¥çœ‹ç”Ÿæˆçš„è¯ä¹¦\n./certbot-auto certificates\nè¯ä¹¦ç»­æœŸ\n./certbot-auto renew  --manual --preferred-challenges dns --manual-auth-hook &quot;/è„šæœ¬ç›®å½•/au.sh php aly add&quot; --manual-cleanup-hook &quot;/è„šæœ¬ç›®å½•/au.sh php aly clean&quot;  \nåŠ å…¥crontabç¼–è¾‘æ–‡ä»¶ /etc/crontab :\n#è¯ä¹¦æœ‰æ•ˆæœŸ&lt;30å¤©æ‰ä¼šrenewï¼Œæ‰€ä»¥crontabå¯ä»¥é…ç½®ä¸º1å¤©æˆ–1å‘¨ï¼ŒæˆåŠŸç»­æœŸåNginx reload1 1 */1 * * root certbot-auto renew --manual --preferred-challenges dns --deploy-hook  &quot;nginx -s reload&quot;--manual-auth-hook &quot;/è„šæœ¬ç›®å½•/au.sh php aly add&quot; --manual-cleanup-hook &quot;/è„šæœ¬ç›®å½•/au.sh php aly clean&quot; \né…ç½®Nginxç¼–è¾‘é…ç½®æ–‡ä»¶/usr/local/nginx/conf/nginx.conf\n## å°†httpè¯·æ±‚è½¬å‘åˆ°httpsserver &#123;     listen      80;     server_name     www.example.com example.com test.example.com;     rewrite ^(.*)$  https://$host$1 permanent;&#125;server &#123;    server_name  www.example.com example.com test.example.com;    listen 443;    ssl on;    ssl_certificate /etc/letsencrypt/live/example.comfullchain.pem;    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;    ssl_trusted_certificate  /etc/letsencrypt/live/example.com/chain.pem;     location / &#123;        proxy_pass http://127.0.0.1:8080;               ## åšåå‘ä»£ç†éœ€è¦è®¾ç½®è¯·æ±‚headerï¼Œé˜²æ­¢ä¸¢å¤±è®¿é—®è€…çš„åŸIP        proxy_set_header Host $host;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        ## websocketé…ç½®        proxy_http_version 1.1;        proxy_set_header Upgrade $http_upgrade;                       proxy_set_header Connection &quot;upgrade&quot;;    &#125;&#125;\nreload\nnginx -s reload\nğŸ‰å¤§åŠŸå‘Šæˆ\n","categories":["HTTPS"],"tags":["HTTPS","Nginx","Certbot-auto"]},{"title":"ç¬¬ä¸€ç¯‡åšæ–‡--è®°å½•æ­å»ºè¿‡ç¨‹é‡åˆ°çš„é—®é¢˜","url":"/2019/03/23/first/","content":"\næ­¤åšæ–‡æ˜¯ä»ä¹‹å‰è‡ªå·±æ­å»ºçš„åšå®¢ç³»ç»Ÿä¸­è¿ç§»è¿‡æ¥çš„ã€‚\n\nèµ·æºåœ¨2017å¹´12æœˆåº•ï¼Œå½“æ—¶å…´èµ·äº†ä¸€ä¸ªæ­å»ºè‡ªå·±çš„åšå®¢æƒ³æ³•ï¼Œç„¶åä¹°äº†æœåŠ¡å™¨ï¼Œå¼€å§‹ç€æ‰‹æ­å»ºã€‚ä½†æ˜¯åé¢ç”±äºç§ç§åŸå› æç½®äº†ï¼ˆå…¶å®å°±æ˜¯è‡ªå·±çš„æ‹–å»¶ç—‡ğŸ˜‚ï¼‰ã€‚ä¹‹åæ–­æ–­ç»­ç»­å†™äº†ä¸€ç‚¹ä»£ç ï¼Œç›´åˆ°ä»Šå¹´å¹´åï¼Œæ‰çœŸæ­£å¼€å§‹ã€‚\né¡¹ç›®ç›¸å…³é¦–å…ˆæ­¤åšå®¢ç³»ç»Ÿæ˜¯æ ¹æ®Taleä¿®æ”¹è€Œæ¥ï¼Œä¸»è¦æ˜¯å°†åå°å®ç°æ›¿æ¢æˆäº†Spring Boot+MyBatis+FreeMarkerï¼Œåœ¨æ­¤ä¹Ÿè¦æ„Ÿè°¢Taleçš„ä½œè€…@biezhiå†™å‡ºäº†è¿™ä¹ˆæ£’çš„é¡¹ç›®ã€‚\n\næ­å»ºè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜æ•´ä¸ªè¿‡ç¨‹ä¸­é‡åˆ°äº†å¤§å¤§å°å°ä¸å°‘é—®é¢˜ï¼Œåœ¨æ­¤æ€»ç»“åˆ†æç»™å¤§å®¶ã€‚ä¸»è¦æœ‰ä»¥ä¸‹é—®é¢˜ï¼š\n\nLinuxä¸‹MySQLé»˜è®¤æ•°æ®åº“å’Œè¡¨ååŒºåˆ†å¤§å°å†™ã€‚\nSpring Bootä¸­å®ç°ä¸Šä¼ å›¾ç‰‡ï¼Œå¹¶å¯ä»¥é€šè¿‡é“¾æ¥ç›´æ¥è®¿é—®ã€‚\nMyBatis ä¸åŒæ•°æ®åº“SQLçš„å…¼å®¹æ€§å¤„ç†\n\nå…·ä½“è§£å†³Linuxä¸‹MySQLé»˜è®¤æ•°æ®åº“å’Œè¡¨ååŒºåˆ†å¤§å°å†™é€šè¿‡ä¿®æ”¹/etc/mysql/my.cnfé…ç½®æ–‡ä»¶ï¼Œåœ¨[mysqld]ä¸‹å¢åŠ lower_case_table_names = 1ï¼Œé‡å¯æœåŠ¡å³å¯ã€‚\nè¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœå·²ç»å­˜åœ¨åŒ…å«å¤§å†™å­—æ¯çš„æ•°æ®åº“æˆ–è¡¨ï¼Œåœ¨è®¾ç½®ä¸åŒºåˆ†å¤§å°å†™ä¹‹åï¼Œæ“ä½œå®ƒä»¬æ—¶å€™ä¼šæŠ¥ä¸å­˜åœ¨çš„é”™è¯¯ã€‚æ‰€ä»¥åº”è¯¥å…ˆå°†æ•°æ®åº“æˆ–è¡¨åä¿®æ”¹æˆå°å†™ä¹‹åå†åšé…ç½®ã€‚\nSpring Bootä¸­å®ç°ä¸Šä¼ å›¾ç‰‡ï¼Œå¹¶å¯ä»¥é€šè¿‡é“¾æ¥ç›´æ¥è®¿é—®Spring Booté»˜è®¤classpathä¸‹çš„staticå’Œpublicç›®å½•æ–‡ä»¶ä¼šä½œä¸ºé™æ€èµ„æºå¤„ç†ï¼Œé€šè¿‡è¿æ¥ç›´æ¥è®¿é—®ã€‚æ‰€ä»¥ä¸€èˆ¬ç›´æ¥å°†å›¾ç‰‡æ–‡ä»¶å†™å…¥è¿™ä¸¤ä¸ªç›®å½•ä¸‹å³å¯ï¼Œä½†æ˜¯å¦‚æœå°†é¡¹ç›®ä»¥jaråŒ…çš„å½¢å¼éƒ¨ç½²ï¼Œå†™æ–‡ä»¶æ—¶å°†ä¼šå‡ºç°é—®é¢˜ã€‚\næ‰€ä»¥è§£å†³æ–¹æ¡ˆæ˜¯å°†ï¼Œå›¾ç‰‡æ–‡ä»¶å†™åˆ°ç£ç›˜å›ºå®šè·¯å¾„ï¼Œå¹¶å°†è¯¥è·¯å¾„ä¹Ÿé…ç½®æˆé™æ€èµ„æºç›®å½•å³å¯ã€‚ä»¥ä¸‹æ˜¯application.ymlä¸­çš„ç›¸å…³é…ç½®ã€‚\nspring:  mvc:    static-locations: classpath:/static,file:$&#123;web.upload-path&#125;    static-path-pattern: /static/**web:  upload-path: ./upload/\nå°†å½“å‰ç›®å½•ä¸‹çš„uploadç›®å½•é…ç½®ä¸ºé™æ€èµ„æºç›®å½•ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯file:åè®®å‰ç¼€ä¸èƒ½ç¼ºå°‘ï¼Œä»¥åŠ./upload/éœ€è¦ä»¥/ç»“å°¾ï¼Œå¦åˆ™ç›®å½•ä¸‹æ–‡ä»¶å°†æ— æ³•æ­£å¸¸è®¿é—®ã€‚\nMyBatis ä¸åŒæ•°æ®åº“SQLçš„å…¼å®¹æ€§å¤„ç†\né…ç½®DatabaseIdPrivider\n\n@Configurationpublic class MyBatisConfig &#123;    @Bean    public DatabaseIdProvider databaseIdProvider() &#123;        DatabaseIdProvider provider = new VendorDatabaseIdProvider();        Properties prop = new Properties();        prop.setProperty(&quot;MySQL&quot;, &quot;mysql&quot;);        prop.setProperty(&quot;SQLite3&quot;, &quot;sqlite3&quot;);        provider.setProperties(prop);        return provider;    &#125;&#125;\n\nåœ¨mapper.xmlé…ç½®æ–‡ä»¶ä¸­ç¼–å†™å¯¹äºä¸åŒæ•°æ®åº“çš„SQL\n\n&lt;select id=&quot;selectRandom&quot; resultMap=&quot;BaseResultMap&quot; databaseId=&quot;mysql&quot;&gt;    select    &lt;include refid=&quot;allColumns&quot;/&gt;    from `content`    order by rand();  &lt;/select&gt;  &lt;select id=&quot;selectRandom&quot; resultMap=&quot;BaseResultMap&quot; databaseId=&quot;sqlite3&quot;&gt;    select    &lt;include refid=&quot;allColumns&quot;/&gt;    from `content`    order by random();  &lt;/select&gt;\nè¿™æ ·MyBatiså°±èƒ½æ ¹æ®ä¸åŒæ•°æ®åº“æ‰§è¡Œç›¸åº”çš„SQLã€‚\n","categories":["Java"],"tags":["MyBatis","Spring Boot","MySQL"]},{"title":"Spring Booté¡¹ç›®æ‰“åŒ…æˆjaréƒ¨ç½²è¯»å–Resourcesä¸‹çš„æ–‡ä»¶","url":"/2019/07/09/Spring-Boot%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E6%88%90jar%E9%83%A8%E7%BD%B2%E8%AF%BB%E5%8F%96Resources%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B6/","content":"èµ·æºSpring Booté¡¹ç›®æ‰“åŒ…æˆjaréƒ¨ç½²æ—¶ï¼Œå‘ç°å¹³æ—¶ä½¿ç”¨è¯»å–Resourcesç›®å½•çš„æ–‡ä»¶æŠ¥é”™äº†ï¼Œæ— æ³•æ­£ç¡®è¯»å–åˆ°æ–‡ä»¶ã€‚\n\nåŸå› åˆ†æé¡¹ç›®ç»“æ„\n\nsrc\n  |--main\n      |--java\n      |    |--com\n      |        |--example\n      |              |-- ...  \n      |--resouces\n          |--data\n              |--data.json\nç°åœ¨éœ€è¦åšçš„äº‹è¯»å–data.jsonä¸­çš„å†…å®¹ï¼Œä¸‹é¢æ˜¯æˆ‘å®ç°çš„ä»£ç \nclass InitData &#123;  return Files.readAllBytes(Paths.get(ResourceUtils.getFile(&quot;classpath:data/data.json&quot;).getAbsolutePath()));&#125;\nç”±äºé¡¹ç›®æ˜¯æ‰“åŒ…æˆjaréƒ¨ç½²çš„ï¼Œæ‰€ä»¥getAbsolutePath()è¿”å›çš„æ˜¯jar:å¼€å¤´çš„è·¯å¾„ï¼Œå³ä½¿ç”¨çš„çš„jaråè®®ã€‚è€ŒæŸ¥çœ‹Path#getæ–¹æ³•æºç ï¼Œä½¿ç”¨çš„FileSystemåªæ”¯æŒfileåè®®ï¼Œå› æ­¤æ˜¯æ— æ³•æ­£ç¡®è·å–åˆ°æ–‡ä»¶å¹¶è¯»å–æ•°æ®ã€‚åŒæ ·è·å–åˆ°Fileå¯¹è±¡ï¼Œåˆ›å»ºFileInputStreamè¯»å–æ–‡ä»¶ä¹Ÿæ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºFileInputStreamä¹Ÿä¸æ”¯æŒjaråè®®ã€‚\nè§£å†³public class InitData &#123; public static byte[] getData() throws IOException &#123;  InputStream in = ResourceUtils.getURL(&quot;classpath:data/data.json&quot;).openStream();//  InputStream in = new DefaultResourceLoader().getResource(&quot;classpath:data/data.json&quot;).getInputStream();//  InputStream in = InitData.class.getResourceAsStream(&quot;data/data.json&quot;);//  InputStream in = InitData.class.getResource(&quot;data/data.json&quot;).openStream();  // ä½¿ç”¨ InputStreamè¯»å–æ–‡ä»¶å†…å®¹  // ... &#125;&#125;\nä¸Šé¢å‡ ç§å®ç°æ–¹å¼å¤§åŒå°å¼‚ï¼Œéƒ½æ˜¯è·å–åˆ°InputStreamï¼Œç„¶åæ˜¯ç”¨InputStreamè¯»å–æ–‡ä»¶å†…å®¹ã€‚\næ€»ç»“IOæ“ä½œæ—¶éœ€è¦æ³¨æ„æ“ä½œèµ„æºçš„åè®®ï¼ŒæŸäº›ç±»åº“æ˜¯åªæ”¯æŒfileåè®®çš„ï¼Œç”¨å®ƒä»¬æ“ä½œå…¶ä»–åè®®èµ„æºåˆ™ä¼šäº§ç”Ÿå¼‚å¸¸ã€‚\n","categories":["Java"],"tags":["Spring Boot"]},{"title":"ã€ŠHead Firstè®¾è®¡æ¨¡å¼ã€‹è¯»ä¹¦ç¬”è®°--è§‚å¯Ÿè€…æ¨¡å¼","url":"/2021/04/13/hand-first-reading-notes-obsrver-pattern/","content":"ä»€ä¹ˆæ˜¯è§‚å¯Ÿè€…æ¨¡å¼\nè§‚å¯Ÿè€…æ¨¡å¼åœ¨å¯¹è±¡ä¹‹é—´å®šä¹‰ä¸€å¯¹å¤šçš„ä¾èµ–ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€ï¼Œä¾èµ–å®ƒçš„å¯¹è±¡éƒ½ä¼šå—åˆ°é€šçŸ¥ã€‚\n\nè§‚å¯Ÿè€…æ¨¡å¼æœ‰ä¸¤ä¸ªè§’è‰²ï¼šâ€œä¸»é¢˜â€å’Œâ€œè§‚å¯Ÿè€…â€ã€‚è§‚å¯Ÿè€…åªéœ€è¦åœ¨ä¸»é¢˜å¤„æ³¨å†Œï¼Œå½“ä¸»é¢˜çŠ¶æ€å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå°±ä¼šä¸»åŠ¨é€šçŸ¥è§‚å¯Ÿè€…ã€‚è¿™ç§å®ç°æ–¹å¼ï¼Œæ—¢ä½¿å¾—è§‚å¯Ÿè€…èƒ½åŠæ—¶è·å–åˆ°ä¸»é¢˜çš„å˜åŒ–ï¼Œä¹Ÿç®€åŒ–äº†è§‚å¯Ÿè€…çš„å®ç°é€»è¾‘ï¼ˆä¸éœ€è¦å»ä¸åœåœ°è½®è¯¢ï¼Œåˆ¤æ–­ä¸»é¢˜çŠ¶æ€æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼‰ï¼ŒåŒæ—¶å‡è½»äº†ä¸»é¢˜çš„å‹åŠ›ï¼Œå› ä¸ºè§‚å¯Ÿè€…çš„è½®è¯¢ä¼šé€ æˆæ€§èƒ½æŸè€—ã€‚\n \nå¦‚ä½•å®ç°ï¼Ÿé¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹ç¤ºä¾‹çš„ç±»å›¾ã€‚\n\næ­¤ç¤ºä¾‹ä¸­ï¼Œæ°”è±¡æ•°æ®ç›‘æµ‹å™¨(WeatherData)æ˜¯ä¸»é¢˜ï¼Œä¸€ä¸ªç»Ÿè®¡å¸ƒå‘Šæ¿(StatisticsDisplay)æ˜¯è§‚å¯Ÿè€…ï¼Œå½“ç»Ÿè®¡å¸ƒå‘Šæ¿æ³¨å†Œåˆ°æ°”è±¡æ•°æ®æ£€æµ‹å™¨ä¸Šæ—¶ï¼ŒWeatherDataå†…éƒ¨å°±ä¼šä¿ç•™ä¸€ä¸ªStatisticsDisplayçš„å¼•ç”¨ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå°±ä¼šä¸»åŠ¨è°ƒç”¨updateæ–¹æ³•é€šçŸ¥StatisticsDisplayã€‚\nå®é™…åº”ç”¨å‰ç«¯å¯¹DOMå…ƒç´ äº‹ä»¶çš„ç›‘å¬ï¼ŒGUIç¨‹åºä¸­çš„äº‹ä»¶ç›‘å¬ã€‚\næˆ‘çš„ç†è§£è§‚å¯Ÿè€…æ¨¡å¼ä¸­çš„è§‚å¯Ÿè€…å…¶å®å¹¶æ²¡æœ‰çœŸæ­£çš„â€œè§‚å¯Ÿâ€åŠ¨ä½œï¼Œåªæ˜¯å‘Šè¯‰äº†ä¸»é¢˜ï¼šå½“ä½ çš„çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–çš„æ—¶å€™é€šçŸ¥æˆ‘ã€‚æ‰€æœ‰åœ¨å¾ˆå¤šåº”ç”¨åˆ°è§‚å¯Ÿè€…æ¨¡å¼çš„åœ°æ–¹ï¼Œéƒ½æŠŠè§‚å¯Ÿè€…å«åšâ€œç›‘å¬å™¨â€ï¼ˆlistenerï¼‰ã€‚\n","categories":["è¯»ä¹¦ç¬”è®°"],"tags":["è®¾è®¡æ¨¡å¼"]},{"title":"ã€ŠHead Firstè®¾è®¡æ¨¡å¼ã€‹è¯»ä¹¦ç¬”è®°--ç­–ç•¥æ¨¡å¼","url":"/2021/04/07/hand-first-reading-notes-strategy-pattern/","content":"èƒŒæ™¯ä»‹ç»ç°åœ¨æœ‰ä¸€æ¬¾é¸­å­æ¨¡æ‹Ÿæ¸¸æˆï¼šSimUDuckã€‚æ¸¸æˆä¸­ä¼šå‡ºç°å„ç§é¸­å­ï¼Œä¸€è¾¹æ¸¸æ³³ä¸€è¾¹å‘±å‘±å«ã€‚\nè®¾è®¡å¾ˆè‡ªç„¶çš„å¯ä»¥æƒ³åˆ°ï¼Œå…ˆè®¾è®¡ä¸€ä¸ªDuckçˆ¶ç±»ï¼Œå¹¶ä¸”åŒ…å«ä¸¤ä¸ªå®ç°å¥½äº†çš„æ–¹æ³•swimå’Œquckã€‚å¹¶ä¸”å¯¹äºä¸åŒé¸­å­ï¼Œæœ‰ç€ä¸åŒçš„å¤–è§‚ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªdisplayæ–¹æ³•æ¥æè¿°é¸­å­çš„å¤–è§‚ã€‚äºæ˜¯ä¹ï¼Œå¾—åˆ°äº†ä¸‹é¢è¿™ä¹ˆä¸€ä¸ªæŠ½è±¡ç±»Duckä»¥åŠä¸€äº›å®ƒçš„å­ç±»ï¼š\n \nä¸šåŠ¡éœ€æ±‚å˜åŒ–æŸå¤©å®¢æˆ·æå‡ºæ¥ä¸€ä¸ªæ–°çš„éœ€æ±‚ï¼šæˆ‘ä»¬çš„é¸­å­éœ€è¦ä¼šé£ï¼Œä»¥æ­¤æ¥åˆ¶é€ å·®å¼‚åŒ–ï¼ŒåŒºåˆ«äºå…¶ä»–ç«äº‰è€…ã€‚\nå¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œåªéœ€è¦åœ¨çˆ¶ç±»Duckä¸ŠåŠ ä¸Šflyæ–¹æ³•ï¼Œè¿™æ ·æ‰€æœ‰çš„å­ç±»éƒ½å…·å¤‡äº†é£è¡Œçš„èƒ½åŠ›ã€‚\n\nä½†æ˜¯è¿™æ ·å‡ºç°äº†æˆ‘ä»¬ä¸æƒ³è¦å‡ºç°çš„æƒ…å†µâ€”â€”ä¸€åªæ©¡çš®é¸­ä¹Ÿä¼šé£äº†ï¼\n\næ˜¾ç„¶æ©¡çš®é¸­ä¼šé£æ˜¯ä¸ç¬¦åˆé¢„æœŸäº†ï¼Œä¸€ä¸ªè¡¥æ•‘æªæ–½å°±æ˜¯ï¼šç±»ä¼¼æ©¡çš®é¸­çš„quckæ–¹æ³•ï¼Œè¦†ç›–flyæ–¹æ³•ï¼Œå¹¶ä¸”ä»€ä¹ˆä¹Ÿä¸é”™ã€‚\n\nå¦‚æœåç»­åŠ å…¥è¯±é¥µé¸­(DecoyDuck)ï¼Œè¯±é¥µé¸­æ˜¯æœ¨å¤´é¸­ï¼Œæ—¢ä¸ä¼šé£ä¹Ÿä¸ä¼šå«ã€‚æ‰€ä»¥ï¼š\n\nç°åœ¨çœ‹æ¥ï¼Œç»§æ‰¿æœ‰æ—¶å¹¶ä¸æ˜¯ä¸€ä¸ªå®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚å¯¹äºçˆ¶ç±»çš„ä¿®æ”¹å°†ä¼šå½±å“åˆ°æ‰€æœ‰å­ç±»ï¼Œä»è€Œå¯èƒ½å¯¼è‡´å­ç±»éœ€è¦åšå‡ºå¯¹åº”çš„ä¿®æ”¹ã€‚\nå°è¯•ä½¿ç”¨æ¥å£å¦‚æœæˆ‘ä»¬å®šä¹‰Flyableå’ŒQuackableï¼Œè®©å­ç±»é€‰æ‹©å®ç°è¿™ä¸¤ä¸ªæ¥å£ã€‚\n\nä»ä¸Šå›¾å°±èƒ½çœ‹å‡ºï¼Œæ¯æœ‰ä¸ªæ–°å­ç±»ï¼Œå°±éœ€è¦è€ƒè™‘æ˜¯å¦è¦å®ç°Flyableå’ŒQuackableæ¥å£ï¼Œå¹¶ä¸”å¯èƒ½å®ƒä»¬ä¹‹ä¸­å¾ˆå¤šå®ç°æ˜¯ç›¸åŒçš„ã€‚\nå¦ä¸€ç§æ–¹æ¡ˆè€ƒè™‘å°†é¸­å­â€œé£è¡Œâ€å’Œâ€œå«â€è¿™ä¸¤ä¸ªè¡Œä¸ºæ˜¯å¯å˜åŒ–çš„éƒ¨åˆ†ï¼Œå°†å®ƒä»¬å–å‡ºæ¥å•ç‹¬åšå°è£…ï¼Œç„¶åå†ç»„åˆèµ·æ¥ã€‚é¸­å­ç±»(Duck)ä¸­åªåŒ…å«æ‰€æœ‰é¸­å­çš„å…±åŒç‰¹æ€§ã€‚\n\nç°åœ¨å°†é¸­å­çš„â€œé£è¡Œâ€å’Œâ€œå«â€ä¸¤ä¸ªåŠ¨ä½œâ€œå§”æ‰˜â€ç»™åˆ«äººå¤„ç†ï¼Œè€Œä¸æ˜¯è‡ªå·±å®ç°ã€‚\n\nflyBehaviorå’ŒquackBehaviorå¯ä»¥æ ¹æ®å…·ä½“çš„å­ç±»è¿›è¡Œèµ‹å€¼ã€‚æœ€åæˆ‘ä»¬å°†å¾—åˆ°ä»¥ä¸‹ç±»å›¾ï¼š\n\nåƒå®ç°äº†FlyBehaivoræ¥å£çš„ä¸€äº›åˆ—ç±»ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œç®—æ³•æ—â€ã€‚\nç­–ç•¥æ¨¡å¼çš„å®šä¹‰ç­–ç•¥æ¨¡å¼å®šä¹‰äº†ç®—æ³•æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©å®ƒä»¬ä¹‹é—´å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œæ­¤æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ç‹¬ç«‹äºä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚\n","categories":["è¯»ä¹¦ç¬”è®°"],"tags":["è®¾è®¡æ¨¡å¼"]},{"title":"äºŒå‰å †åŠå †æ’åº","url":"/2019/08/07/heap-and-heap-sort/","content":"äºŒå‰å †æ¦‚è¿°äºŒå‰å †ï¼ˆä¸‹æ–‡ç®€ç§°ä¸ºå †ï¼‰æ˜¯ä¸€ç§ä¼˜å…ˆé˜Ÿåˆ—ï¼Œå¯¹äºä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—åº”è¯¥è‡³å°‘åŒ…å«insert(æ’å…¥)å’ŒdeleteMin(åˆ é™¤æœ€å°è€…)ä¸¤ä¸ªæ“ä½œã€‚å †å…·æœ‰ ç»“æ„æ€§ å’Œ å †åºæ€§ ä¸¤ä¸ªæ€§è´¨ã€‚\n\nå †çš„æ€§è´¨ç»“æ„æ€§å †æ˜¯ä¸€é¢— å®Œå…¨äºŒå‰æ ‘ã€‚æ‰€ä»¥å¯¹äºä¸€ä¸ªé«˜ä¸º$h$çš„å®Œå…¨äºŒå‰æ ‘æœ‰$ 2^h $åˆ°$2^{h+1}$ä¸ªèŠ‚ç‚¹ã€‚è¿™æ„å‘³ç€æœ‰$N$ä¸ªèŠ‚ç‚¹çš„å®Œå…¨äºŒå‰æ ‘çš„é«˜ä¸º$\\left\\lfloor\\log N\\right\\rfloor$ï¼ˆ$\\log N$å‘ä¸‹å–æ•´ï¼‰ã€‚è§‚å¯Ÿå®Œå…¨äºŒå‰æ ‘çš„ç»“æ„ï¼Œå¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬å­˜å‚¨å®Œå…¨äºŒå‰æ ‘ä¸éœ€è¦ä½¿ç”¨é“¾è¡¨ï¼Œç”¨æ•°ç»„å³å¯ï¼Œåªéœ€è¦å°†å…ƒç´ æŒ‰ä»ä¸Šåˆ°ä¸‹ï¼Œç”±å·¦è‡³å³çš„é¡ºåºä¾æ¬¡å­˜å…¥æ•°ç»„ï¼ˆä¸ºæ–¹ä¾¿è®¡ç®—ï¼Œæ•°ç»„ä»ä¸‹æ ‡1å¼€å§‹å­˜å‚¨å…ƒç´ ï¼‰ã€‚è¿™æ—¶ï¼Œå¯¹äºæ•°ç»„ä»»æ„ä½ç½®ä¸Š$ i(i \\neq 0) $çš„å…ƒç´ ï¼Œå…¶å·¦å­èŠ‚ç‚¹åœ¨ä½ç½®$2i$ä¸Šï¼Œå³å­èŠ‚ç‚¹åœ¨å·¦å­èŠ‚ç‚¹ä¹‹åçš„ä½ç½®ï¼Œå³$2i+1$ï¼Œå®ƒçš„çˆ¶èŠ‚ç‚¹åœ¨ä½ç½®$\\left\\lfloor i/2 \\right\\rfloor$ä¸Šï¼ˆæ­¤æ—¶$i \\neq 1$ï¼‰ã€‚\nå †åºæ€§å †ä»»æ„èŠ‚ç‚¹åº”è¯¥å°äºå®ƒçš„æ‰€æœ‰åè£”èŠ‚ç‚¹ï¼Œä»è€Œæœ‰äº†â€œå¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹$X$ï¼Œ$X$çš„çˆ¶èŠ‚ç‚¹å…ƒç´ åº”å°äºæˆ–ç­‰äº$X$ï¼Œæ ¹èŠ‚ç‚¹é™¤å¤–â€ï¼Œè¿™å°±æ˜¯å †åºæ€§ï¼ˆå°å †ï¼Œç›¸ååˆ™æ˜¯å¤§å †ï¼‰ã€‚\nå †çš„å®ç°public class BinaryHeap&lt;T extends Comparable&lt;? super T&gt;&gt; &#123;\tprivate static final int DEFAULT_CAPACITY = 10;\tprivate T[] items;\tprivate int currentSize;\t\tpublic BinaryHeap() &#123;\t\tthis(DEFAULT_CAPACITY);\t&#125;\t\tpublic BinaryHeap(int capacity) &#123;\t\tif (capacity &lt; 0) \t\t\tcapacity = DEFAULT_CAPACITY;\t\titems = createArray(capacity);\t&#125;\t\tpublic BinaryHeap(T[] items) &#123;\t\tthis(items == null ? DEFAULT_CAPACITY : items.length);\t\tif (items != null) &#123;\t\t\tcurrentSize = items.length;\t\t\tSystem.arraycopy(items, 0, this.items, 1, currentSize);\t\t\tbuildHeap();\t\t&#125;\t&#125;\t\tpublic boolean isEmpty() &#123;\t\treturn currentSize == 0;\t&#125;\t\tpublic void clear() &#123;\t\tcurrentSize = 0;\t\titems = createArray(DEFAULT_CAPACITY);\t&#125;\t\tpublic T findMin() &#123;\t\tif (currentSize &lt; 1) \t\t\tthrow new NoSuchElementException();\t\treturn items[1];\t&#125;\t\tpublic void insert(T item) &#123;\t\tif (currentSize == items.length - 1) &#123;\t\t\tenlargeArray((items.length &lt;&lt; 1) + 1);\t\t&#125;\t\tint hole = ++currentSize;\t\tfor (items[0] = item; item.compareTo(items[hole &gt;&gt; 1]) &lt; 0; hole &gt;&gt;= 1) &#123;\t\t\titems[hole] = items[hole &gt;&gt; 1];\t\t&#125;\t\titems[hole] = item;\t&#125;\t\tpublic T deleteMin() &#123;\t\tif (isEmpty())\t\t\tthrow new NoSuchElementException();\t\tT min = findMin();\t\titems[1] = items[currentSize--];\t\tpercolateDown(1);\t\t\t\treturn min;\t&#125;\t\tprivate void percolateDown(int hole) &#123;\t\tint child;\t\tT tmp = items[hole];\t\tfor (; hole &lt;&lt; 1 &lt;= currentSize; hole = child) &#123;\t\t\tchild = hole &lt;&lt; 1;\t\t\tif (child != currentSize &amp;&amp; items[child + 1].compareTo(items[child]) &lt; 0) &#123;\t\t\t\tchild++;\t\t\t&#125;\t\t\tif (items[child].compareTo(items[hole]) &lt; 0) &#123;\t\t\t\titems[hole] = items[child];\t\t\t&#125; else &#123;\t\t\t\tbreak;\t\t\t&#125;\t\t&#125;\t\titems[hole] = tmp;\t&#125;\t\tprivate void buildHeap() &#123;\t\tfor (int i = currentSize &gt;&gt; 1; i &gt; 0; i--) &#123;\t\t\tpercolateDown(i);\t\t&#125;\t&#125;\t\t@Override\tpublic String toString() &#123;\t\treturn &quot;BinaryHeap [items=&quot; + Arrays.toString(items) + &quot;, currentSize=&quot; + currentSize + &quot;]&quot;;\t&#125;\t@SuppressWarnings(&quot;unchecked&quot;)\tprivate void enlargeArray(int newSize) &#123;\t\tT[] tmp = (T[]) new Comparable[newSize];\t\tSystem.arraycopy(items, 1, tmp, 1, currentSize);\t\titems = tmp;\t&#125;\t\t@SuppressWarnings(&quot;unchecked&quot;)\tprivate T[] createArray(int capacity) &#123;\t\treturn (T[]) new Comparable[capacity + 1];\t&#125;\t\tpublic static void main(String[] args) &#123;\t\tBinaryHeap&lt;Integer&gt; heap = new BinaryHeap&lt;&gt;(new Integer[] &#123;2, 5, 7, 9, 1&#125;);\t\tfor (int i = 10; i &gt; 0; i--)\t\t\theap.insert(i);\t\tSystem.out.println(&quot;Min:&quot; + heap.findMin());\t\tSystem.out.println(heap);\t&#125;&#125;\nå †æ’åºå †æ’åºæ˜¯ä½¿ç”¨äºŒå‰å †è¿›è¡Œæ’åºçš„ä¸€ç§æ’åºç®—æ³•ã€‚\nå †æ’åºå®ç°è¿™é‡Œå †æ˜¯ä»æ•°ç»„ä¸‹æ ‡0å¼€å§‹å­˜å‚¨çš„ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹ä½ç½®çš„è®¡ç®—å’Œä¹‹å‰çš„æœ‰ç•¥å¾®ä¸åŒã€‚public class HeapSort &#123;        private static int leftChild(int i) &#123;        return 2 * i + 1;    &#125;        private static &lt;T extends Comparable&lt;? super T&gt;&gt; void percolateDown(T[] arr, int i, int n) &#123;        T temp = arr[i];        int child;        for (; leftChild(i) &lt; n; i = child) &#123;            child = leftChild(i);                        // child != n - 1æ„å‘³ç€iè¿˜æœ‰å³å­©å­            if (child != n - 1 &amp;&amp; arr[child+1].compareTo(arr[child]) &gt; 0) &#123;                child++;            &#125;                        // å°äºtempï¼Œç©ºç©´ä¸­åº”è¯¥æ”¾å…¥temp            if (temp.compareTo(arr[child]) &gt; 0) &#123;                break;            &#125; else &#123;                // ç©ºç©´ä¸‹ç§»ä¸€å±‚                arr[i] = arr[child];            &#125;        &#125;        arr[i] = temp;    &#125;        private static &lt;T extends Comparable&lt;? super T&gt;&gt; void swap(T[] arr, int i, int j) &#123;        T temp = arr[i];        arr[i] = arr[j];        arr[j] = temp;    &#125;        public static &lt;T extends Comparable&lt;? super T&gt;&gt; void heapSort(T[] arr) &#123;        // build max heap        for (int i = arr.length / 2 - 1; i &gt;= 0; i--) &#123;            percolateDown(arr, i, arr.length);        &#125;                for (int i = arr.length - 1; i &gt; 0; i--) &#123;            swap(arr, 0, i);            percolateDown(arr, 0, i);        &#125;    &#125;        public static void main(String[] args) &#123;        Integer nums[] = &#123;2, 83, 34, 12, 78, 39, 20&#125;;        heapSort(nums);        Stream.of(nums).forEach(System.out::println);    &#125;&#125;\nå †æ’åºçš„æ—¶é—´å¤æ‚åº¦å †æ’åºçš„æ—¶é—´å¤æ‚å †ä¸º$O(N\\log N)$ã€‚å †æ’åºéœ€è¦è¿›è¡Œ$N$æ¬¡deleteMinæ“ä½œï¼Œæ¯æ¬¡deleteMinæ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º$O(\\log N)$ï¼Œå› æ­¤æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º$O(N\\log N)$ã€‚\næºç ç®—æ³•å®Œæ•´æºç \n\näºŒå‰å †\nå †æ’åº\n\nå‚è€ƒMarkAllenWeiss. æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æ:Javaè¯­è¨€æè¿°-ç¬¬3ç‰ˆ[M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2016, 156-164,191-193\n","categories":["ç®—æ³•","æ•°æ®ç»“æ„"],"tags":["ç®—æ³•","æ•°æ®ç»“æ„","æ’åº"]},{"title":"å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰","url":"/2019/08/05/merge-sort/","content":"æ¦‚è¿°å½’å¹¶æ’åºæ˜¯ä¸€ç§æ—¶é—´å¤æ‚åº¦ä¸º$ O (N\\log N) $çš„æ’åºç®—æ³•ï¼Œä½¿ç”¨çš„æ˜¯ åˆ†æ²» çš„ç­–ç•¥ã€‚ç®—æ³•çš„åŸºæœ¬æ“ä½œæ˜¯åˆå¹¶ä¸¤ä¸ªå·²ç»æ’åºçš„åºåˆ—ï¼Œå› ä¸ºä¸¤ä¸ªåºåˆ—æ˜¯å·²ç»æ’åºäº†çš„ï¼Œæ‰€ä»¥å°†å®ƒä»¬æŒ‰é¡ºåºå¤åˆ¶åˆ°ç¬¬ä¸‰ä¸ªåºåˆ—ä¸­ï¼Œå¯ä»¥é€šè¿‡ä¸€æ¬¡éå†å®Œæˆã€‚æ‰€ä»¥å°†åŸåºåˆ—ä½¿ç”¨é€’å½’ä¸æ–­çš„åˆ†æˆä¸¤ä¸ªå­åºåˆ—ï¼Œç›´è‡³åºåˆ—ä¸­æ˜¯å…ƒç´ ä¸ªæ•°ä¸º1ï¼Œæ­¤æ—¶åºåˆ—ä¸ºå·²ç»æ’åºå®Œæˆçš„ï¼Œå°†ä¸¤ä¸ªå­åºåˆ—åˆå¹¶ï¼Œå¾—åˆ°ä¸€ä¸ªæ’åºå®Œæˆçš„åºåˆ—ï¼Œå†ç»§ç»­åˆå¹¶ï¼Œç›´è‡³æ•´ä¸ªåºåˆ—éƒ½æ˜¯å·²æ’åºçš„ã€‚\n\nç®—æ³•å®ç°ç®—æ³•å®ç°ä¸»è¦åŒ…å«ä¸¤ä¸ªè¿‡ç¨‹ï¼šå°†åºåˆ—ä»æŒ‡å®šçš„å¼€å§‹åˆ°ç»“æŸä½ç½®çš„å­åºåˆ—æ’åºï¼Œåˆå¹¶ä¸¤ä¸ªæœ‰åºçš„åºåˆ—ç®—æ³•æ˜¯ç”¨é€’å½’å®ç°çš„ï¼Œé€’å½’çš„è¾¹ç•Œä¸ºï¼šæŒ‡å®šçš„ç»“æŸä½ç½®å’Œå’Œç»“æŸä½ç½®ç›¸åŒï¼Œæ­¤æ—¶å­åºåˆ—åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ˜¾ç„¶å­åºåˆ—ä¸ºå·²æ’åºçš„ã€‚å®Œæ•´å®ç°ä»£ç å‚è§ï¼šMergeSort\nå­åºåˆ—æ’åºprivate static &lt;T extends Comparable&lt;? super T&gt;&gt; void mergeSort(T[] eles, T[] temp, int begin, int end) &#123;    if (begin == end) &#123; // å¼€å§‹ä½ç½®ä¸ç»“æŸä½ç½®ç›¸åŒæ—¶ï¼Œåºåˆ—åˆ™å·²ç»æ’åºå®Œæˆ        return;    &#125;    int middle = (begin + end) / 2;    // å°†åºåˆ—åˆ†ä¸ºä¸¤ä¸ªå­åºåˆ—ï¼Œåˆ†åˆ«æ’åºåå†åˆå¹¶    mergeSort(eles, temp, begin, middle);    mergeSort(eles, temp, middle + 1, end);    // åˆå¹¶ä¸¤ä¸ªæ’åºå®Œæˆçš„å­åºåˆ—    merge(eles, temp, begin, middle + 1, end);&#125;\nåˆå¹¶å­åºåˆ—private static &lt;T extends Comparable&lt;? super T&gt;&gt; void merge(T[] eles, T[] temp, int leftPos, int rightPos, int rightEnd) &#123;    int tempIndex = leftPos;    int leftEnd = rightPos - 1;    int lIndex = leftPos;    int rIndex = rightPos;        while (lIndex &lt;= leftEnd &amp;&amp; rIndex &lt;= rightEnd) &#123;        if (eles[lIndex].compareTo(eles[rIndex]) &lt;= 0) &#123;            temp[tempIndex++] = eles[lIndex++];        &#125; else &#123;            temp[tempIndex++] = eles[rIndex++];        &#125;    &#125;    // å¤„ç†leftå‰©ä½™çš„å…ƒç´     while (lIndex &lt;= leftEnd) &#123;        temp[tempIndex++] = eles[lIndex++];    &#125;        // å¤„ç†rightå‰©ä½™çš„å…ƒç´     while (rIndex &lt;= rightEnd) &#123;        temp[tempIndex++] = eles[rIndex++];    &#125;    // å°†æ’åºåçš„ç»“æœå¤åˆ¶ä¼šåŸæ•°ç»„    for (int i = leftPos; i &lt;= rightEnd; i++) &#123;        eles[i] = temp[i];    &#125;&#125;\nç®—æ³•å…¥å£public static &lt;T extends Comparable&lt;? super T&gt;&gt; void sort(T[] eles) &#123;    mergeSort(eles, (T[])new Comparable[eles.length], 0, eles.length - 1);&#125;\nç®—æ³•åˆ†æå‡è®¾ä¸ºé¢˜è§„æ¨¡$N$ä¸º2çš„å¹‚ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥å°†å®ƒåˆ†ä¸ºè¿ä¸ªç›¸ç­‰çš„éƒ¨åˆ†ã€‚å¯¹äº$N = 1$ï¼Œå½’å¹¶æ’åºæ‰€ç”¨çš„æ—¶é—´ä¸ºå¸¸æ•°ï¼Œæˆ‘ä»¬å°†å®ƒè®°ä¸º1ï¼ˆè¿™ä¸ªå¸¸æ•°æ˜¯å¤šå°‘å¹¶ä¸ä¼šå½±å“åˆ°æœ€ç»ˆå¾—åˆ°çš„æ—¶é—´å¤æ‚åº¦ï¼Œè¿™é‡Œä½¿ç”¨1æ–¹ä¾¿äºè®¡ç®—ï¼‰ã€‚å¯¹äºNå½’å¹¶æ’åºçš„æ—¶é—´ç­‰äºå®Œæˆä¸¤ä¸ªå¤§å°ä¸º $N/2$ çš„å½’å¹¶æ’åºæ‰€ç”¨çš„æ—¶é—´åŠ ä¸Šåˆå¹¶çš„æ—¶é—´ï¼Œåˆå¹¶æ‰€ç”¨çš„æ—¶é—´ä¸ºçº¿æ€§çš„ã€‚æ‰€ä»¥æœ‰ä¸‹åˆ—ç­‰å¼ï¼š\n\n\\begin{array}{lcl}\nT(1)        & = & 1 \\\\ \nT(N)  & = & 2T(N/2) + N \\tag{1}\n\\end{array}ç”±äº$N$ä¸º2çš„å¹‚ï¼Œæ‰€ä»¥å°†ç­‰å¼1ä¸­çš„$N$ç”¨$N/2$æ›¿æ¢ï¼Œå¹¶å°†ç­‰å¼ä¸¤ä¾§åŒæ—¶ä¹˜ä»¥2ï¼Œåˆ™å¯ä»¥å¾—åˆ°\n\n2T(N/2) = 2(2T(N/4) + N/2) = 4T(N/4) + Nä»è€Œå¾—åˆ°\n\nT(N) = 4T(N/4) + 2Nå†å°†$N/4$å¸¦å…¥ç­‰å¼1ï¼ŒåŒæ ·èƒ½å¾—åˆ°\n\n4T(N/4) = 4(2T(N/8) + N/4) = 8T(N/8) + Næ‰€ä»¥æˆ‘ä»¬æœ‰\n\nT(N) = 8T(N/8) + 3Nä»¥æ­¤ç±»æ¨ï¼Œæˆ‘ä»¬å°†èƒ½å¾—åˆ°\n\nT(N) = 2^kT(N/2^k) + k \\cdot Nå…¶ä¸­ $k = \\log N$, æ‰€ä»¥\n\nT(N) = NT(1) + N\\log N = N\\log N + Nå› æ­¤å½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º $O(N\\log N)$ã€‚\næ­¤è¯æ˜ä¸­ä»¤$N$ä¸º2çš„å¹‚ï¼Œå¯ä»¥ç®€åŒ–è®¡ç®—ï¼Œå½“$N$ä¸ä¸º2çš„å¹‚æ—¶è®¡ç®—ç•¥æœ‰ä¸åŒï¼Œä½†å¾—åˆ°çš„æ—¶é—´å¤æ‚åº¦ä»æœª$O(N\\log N)$ã€‚\næ€è€ƒ\nå½’å¹¶æ’åºçš„éé€’å½’å®ç°\nå¦‚ä½•ä¸ä½¿ç”¨é¢å¤–çš„å†…å­˜ç©ºé—´å®Œæˆæ’åº\n\nå‚è€ƒMarkAllenWeiss. æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æ:Javaè¯­è¨€æè¿°-ç¬¬3ç‰ˆ[M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2016, 193-198\n","categories":["ç®—æ³•"],"tags":["ç®—æ³•","æ’åº"]},{"title":"ä¸€ä¸ªPerlæ¨¡å—çš„ç¼–å†™æ–¹æ³•","url":"/2019/05/13/%E4%B8%80%E4%B8%AAPerl%E6%A8%A1%E5%9D%97%E7%9A%84%E7%BC%96%E5%86%99%E6%96%B9%E6%B3%95/","content":"èµ·æºæœ€è¿‘åœ¨å·¥ä½œä¸­éœ€è¦ä¸€äº›Perlè„šæœ¬ï¼Œå‘ç°ç›®å‰é¡¹ç›®ä¸­è„šæœ¬çš„å…¬å…±åŠŸèƒ½çš„å¤ç”¨åšå¾—å¾ˆå·®ï¼Œå¹¶ä¸”ç°å­˜çš„å¤ç”¨è„šæœ¬ä¹Ÿåªæ˜¯ä½¿ç”¨require &quot;/your/path/your_script.pl&quot;;ç®€å•çš„å¼•ç”¨ï¼Œå¹¶æ²¡ç¼–å†™æˆæ¨¡å—(.pm)ï¼Œå®‰è£…åˆ°@INCç›®å½•ä¸­ã€‚äºæ˜¯å°±æœ‰äº†è¿™ç¯‡åšæ–‡ã€‚åœ¨ä»‹ç»æ¨¡å—ç¼–å†™æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥è¯´è¯´ä¸¤ç§åŠ è½½æ¨¡å—çš„æ–¹å¼ã€‚\n\næ¨¡å—åŠ è½½æ–¹å¼åŠ è½½æ¨¡å—å¯ä»¥ä½¿ç”¨requireå’Œuseå…³é”®å­—ã€‚\nä¸¤è€…çš„åŒºåˆ«\nrequireæ˜¯è¿è¡Œæ—¶åŠ è½½ï¼Œuseæ˜¯ç¼–è¯‘æ—¶åŠ è½½ã€‚\nrequireå¯ä»¥æŒ‡å®šè·¯å¾„ï¼Œuseåªä¼šä»@INCä¸­æŸ¥æ‰¾æ¨¡å—ï¼Œæ‰¾ä¸åˆ°åˆ™ä¼šç¼–è¯‘å¤±è´¥ã€‚\nrequireåŠ è½½ä¸€å®šåœ¨å½“å‰å‘½åç©ºé—´ï¼Œuseå¯ä»¥ä¸æ±¡æŸ“å½“å‰å‘½åç©ºé—´ã€‚\n\nuseå…¶å®å°†ç›¸å½“äºä¸‹é¢çš„ä»£ç require ModuleName;import  ModuleName::(@EXPORT);\næ¨¡å—çš„ç¼–å†™ä½¿ç”¨importå‡½æ•°å¯¼å‡ºå˜é‡å’Œå‡½æ•°# Some/Module.pmpackage Some::Module;use strict;use warnings;# ç”±äºä¸Šé¢ä½¿ç”¨äº†use strict;æ‰€ä»¥éœ€è¦åŠ è¿™å¥ï¼Œå¦åˆ™ç¼–è¯‘æŠ¥é”™no strict &#x27;refs&#x27;;my $var1 = 513;sub import &#123;  *&#123;caller() . &quot;::fun1&quot;&#125; = \\&amp;fun1;  *&#123;caller() . &quot;::var1&quot;&#125; = \\$var1;&#125;sub fun1 &#123;  print &quot;I&#x27;m fun1.&quot;;&#125;# æ‰€æœ‰æ¨¡å—éƒ½éœ€è¦åŠ ï¼Œç¡®ä¿åŠ è½½æ¨¡å—æ—¶è¿”å›true1;# test.pluse strict;use warnings;use 5.010;# å¦‚æœå°†æ¨¡å—å·²æ”¾åˆ°@INCç›®å½•ä¸‹ï¼Œåˆ™ä¸éœ€è¦ä¸‹é¢çš„ä»£ç BEGIN &#123;    push(@INC, &quot;/your/module/path&quot;);&#125;use Some::Module;say $var1;&amp;fun1();\nè¿è¡Œtest.plå°†ä¼šæœ‰ä»¥ä¸‹è¾“å‡º513I&#x27;m fun1.\nimportçš„å¯¼å‡ºæ–¹å¼ï¼Œå…·ä½“è®²è§£å‚è§Advanced Perl Programming(2nd Edition by Simon Cozens) â€” Chapter 1. Advanced Techniques\nä½¿ç”¨Exporteræ¨¡å—å¯¼å‡ºå˜é‡å’Œå‡½æ•°# Some/Module.pmpackage Some::Module;use strict;use warnings;use Exporter;our @ISA = qw(Exporter);our @EXPORT = qw($var1 func1);my $var1 = 513;sub fun1 &#123;  print &quot;I&#x27;m fun1.&quot;;&#125;# æ‰€æœ‰æ¨¡å—éƒ½éœ€è¦åŠ ï¼Œç¡®ä¿åŠ è½½æ¨¡å—æ—¶è¿”å›true1;\nExporterçš„å¯¼å‡ºæ–¹å¼ï¼Œè¿™é‡Œåªæ˜¯ä½¿ç”¨äº†æœ€ç®€ç­”çš„@EXPORTæ•°ç»„ï¼Œè¿˜æœ‰å…¶ä»–çš„ä½¿ç”¨æ–¹æ³•å‚è§Exporteræ–‡æ¡£ã€‚\né¢å‘å¯¹è±¡çš„æ¨¡å—ç¼–å†™# Some/Module.pmpackage Some::Module;use strict;use warnings;sub new &#123;  my ($class, @args) = @_;  my $self = &#123;    @args,    name =&gt; &quot;Tom&quot;,    age =&gt; 18  &#125;  bless $self, $class;&#125;sub getName &#123;  my $self = shift;  return $selft-&gt;&#123;name&#125;;&#125;sub setName &#123;  my ($self, $name) = @_;  $self-&gt;&#123;name&#125; = $name;&#125;sub getExt &#123;  my ($self, $ext) = @_;  return $self-&gt;&#123;$ext&#125;;&#125;# test.pluse strict;use warnings;use 5.010;# å¦‚æœå°†æ¨¡å—å·²æ”¾åˆ°@INCç›®å½•ä¸‹ï¼Œåˆ™ä¸éœ€è¦ä¸‹é¢çš„ä»£ç BEGIN &#123;    push(@INC, &quot;/your/module/path&quot;);&#125;use Some::Module;my $obj = Some::Module-&gt;new(phone =&gt; &quot;3478-1321&quot;);say &quot;Old name: &quot; . $obj-&gt;getName();$obj-&gt;setName(&quot;Jerry&quot;);say &quot;New Name: &quot; . $obj-&gt;getName();say &quot;Phone: &quot; . $obj-&gt;getExt(&quot;phone&quot;);\nè¿è¡Œç»“æœOld name: TomNew Name: JerryPhone: 3478-1321\nå¦‚æœæƒ³å­¦ä¹ å…¶ä»–æ›´é«˜çº§çš„Perlé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå¯ä»¥å»äº†è§£ä¸€ä¸‹ Moã€Moo å’Œ Mooseç­‰æ¨¡å—ã€‚\nå®Œç»“ğŸ‰ä»¥ä¸Šå°±æ˜¯æ¨¡å—ç¼–å†™çš„ä¸€äº›ç®€å•æ€»ç»“ã€‚\n","categories":["Perl"],"tags":["Perl"]}]